Index: app/src/main/java/orderFlex/paymentCollection/Activityes/LandingPage/LandingActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package orderFlex.paymentCollection.Activityes.LandingPage;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.util.DisplayMetrics;\r\nimport android.util.Log;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.view.animation.Animation;\r\nimport android.view.animation.AnimationUtils;\r\nimport android.webkit.CookieManager;\r\nimport android.webkit.HttpAuthHandler;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.PopupWindow;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\nimport orderFlex.paymentCollection.Activityes.CustomerOrderList.OrderListActivity;\r\nimport orderFlex.paymentCollection.Activityes.Offers.Offers;\r\nimport orderFlex.paymentCollection.Activityes.login.UserLogin;\r\nimport orderFlex.paymentCollection.Model.APICallings.PullAppSetup;\r\nimport orderFlex.paymentCollection.Model.AppSetup.AppSetupRequestBody;\r\nimport orderFlex.paymentCollection.Model.AppSetup.AppSetupResponse;\r\nimport orderFlex.paymentCollection.R;\r\nimport orderFlex.paymentCollection.Utility.Helper;\r\nimport orderFlex.paymentCollection.Utility.LanguagePackage.LocaleManager;\r\nimport orderFlex.paymentCollection.Utility.OnSwipeTouchListener;\r\nimport orderFlex.paymentCollection.Utility.SharedPrefManager;\r\n\r\npublic class LandingActivity extends AppCompatActivity implements PullAppSetup.AppSetupListener{\r\n    private Helper helper;\r\n    private SharedPrefManager prefManager;\r\n    private String TAG=\"LandingActivity\";\r\n    private View containerView;\r\n    private ConstraintLayout mainView;\r\n    private ImageView splashImage;\r\n    public static final String USER_AGENT_FAKE = \"Mozilla/5.0 (Linux; Android 4.1.1; Galaxy Nexus Build/JRO03C) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19\";\r\n    private String user_name=\"\", user_pass=\"\";\r\n    public ProgressDialog progressBar;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_landing);\r\n        getSupportActionBar().hide();\r\n        containerView=findViewById(R.id.landingActivity);\r\n        mainView=findViewById(R.id.landingActivity);\r\n\r\n        helper=new Helper(this);\r\n        prefManager=new SharedPrefManager(this);\r\n        //activate and deactivate debugging mode\r\n        prefManager.setDebugMode(false);\r\n\r\n        Log.i(TAG,helper.getAnrdoidID());\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                checkApplication();\r\n            }\r\n        }, 3000);\r\n\r\n        mainView.setOnTouchListener(new OnSwipeTouchListener(this) {\r\n            public void onSwipeTop() {\r\n                Log.i(TAG,\"TOP\");\r\n                checkApplication();\r\n            }\r\n            public void onSwipeRight() {\r\n                Log.i(TAG,\"RIGHT\");\r\n                checkApplication();\r\n            }\r\n            public void onSwipeLeft() {\r\n                Log.i(TAG,\"LEFT\");\r\n                checkApplication();\r\n            }\r\n            public void onSwipeBottom() {\r\n                Log.i(TAG,\"BOTTOM\");\r\n                checkApplication();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    private void checkApplication(){\r\n        if (prefManager.isLoggedIn()){\r\n            AppSetupRequestBody.ScreenDimensions screenDimensions=myScreen();\r\n            AppSetupRequestBody requestBody=new AppSetupRequestBody(\"1v1.2\",helper.getAnrdoidID(),\"\",\r\n                    \"\",helper.getDateTimeInEnglish(),screenDimensions,prefManager.getClientId());\r\n            if (helper.isInternetAvailable()){\r\n                new PullAppSetup(this).pullSetup(\"app.admin@payflex\",\"@ppd0t@dm1n\",requestBody);\r\n            }else {\r\n                helper.showSnakBar(containerView,\"No internet! Please check your internet connection!\");\r\n            }\r\n        }else {\r\n            startActivity(new Intent(LandingActivity.this, UserLogin.class));\r\n        }\r\n\r\n    }\r\n\r\n    public AppSetupRequestBody.ScreenDimensions myScreen() {\r\n        DisplayMetrics metrics = new DisplayMetrics();\r\n        getWindowManager().getDefaultDisplay().getMetrics(metrics);\r\n        int heightPixels = metrics.heightPixels;\r\n        int widthPixels = metrics.widthPixels;\r\n        int densityDpi = metrics.densityDpi;\r\n        float xdpi = metrics.xdpi;\r\n        float ydpi = metrics.ydpi;\r\n        AppSetupRequestBody.ScreenDimensions screenDimensions=new AppSetupRequestBody.ScreenDimensions(widthPixels,heightPixels,densityDpi,xdpi,ydpi);\r\n        Log.i(TAG, \"widthPixels  = \" + widthPixels);\r\n        Log.i(TAG, \"heightPixels = \" + heightPixels);\r\n        Log.i(TAG, \"densityDpi   = \" + densityDpi);\r\n        Log.i(TAG, \"xdpi         = \" + xdpi);\r\n        Log.i(TAG, \"ydpi         = \" + ydpi);\r\n        return screenDimensions;\r\n    }\r\n\r\n    @Override\r\n    public void onAppSetupResponse(AppSetupResponse response, int code) {\r\n        if (response!=null && code==202){\r\n            if (response.getData().getIsUpdatedApp()){\r\n                if (response.getData().getIsSystemUnderMaintenance()){\r\n                    helper.showSnakBar(containerView,\"Server under maintenance!\");\r\n                }else {\r\n                    if (response.getData().getIsMessageForUser()){\r\n                        showPopUp(\"Important Massage!\",response.getData().getCustomWebViewURL(),\r\n                                \"To see the message press the GO button\",\"GO\",\"1\");\r\n                    }else {\r\n                        if (!prefManager.isLoggedIn()){\r\n                            Intent intent =new Intent(LandingActivity.this, UserLogin.class);\r\n                            startActivity(intent);\r\n                            finish();\r\n                        }else {\r\n                            if (response.getData().getOffer()){\r\n                                Intent intent3 =new Intent(LandingActivity.this, Offers.class);\r\n                                startActivity(intent3);\r\n                                finish();\r\n                            }else {\r\n                                Intent intent2 =new Intent(LandingActivity.this, OrderListActivity.class);\r\n                                startActivity(intent2);\r\n                                finish();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (response.getData().getIsMessageForUser()){\r\n                   Log.i(TAG,\"user have message\");\r\n                }\r\n            }else {\r\n                showPopUp(\"Update!\",response.getData().getUpdatedAppLink(),\r\n                        \"Sorry! You are using the older version of application. Please press the UPDATE button to get the updated application\",\"UPDATE\",\"2\");\r\n            }\r\n        }else {\r\n            if (code==401){\r\n                helper.showSnakBar(containerView,\"Unauthorized Username or Password!\");\r\n            }else {\r\n                helper.showSnakBar(containerView,String.valueOf(code)+\": Loading error, Server not responding\");\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private void showPopUp(String title, final String url, String msg, String done, final String msgType){\r\n        progressBar = ProgressDialog.show(this, \"Offer\", \"Loading...\");\r\n        LayoutInflater inflater = (LayoutInflater)\r\n                getSystemService(LAYOUT_INFLATER_SERVICE);\r\n        View popupView = inflater.inflate(R.layout.offer_popup_window, null);\r\n        //TextView heading=popupView.findViewById(R.id.popup_heading);\r\n        ImageView popUpCancel=popupView.findViewById(R.id.popUpCancel);\r\n\r\n        //set webview\r\n        WebView popupWebView=popupView.findViewById(R.id.popupWebView);\r\n        webViewOperation(popupWebView,url);\r\n\r\n        // create the popup window\r\n        int width = LinearLayout.LayoutParams.WRAP_CONTENT;\r\n        int height = LinearLayout.LayoutParams.WRAP_CONTENT;\r\n        boolean focusable = true; // lets taps outside the popup also dismiss it\r\n        final PopupWindow popupWindow = new PopupWindow(popupView, width, height, focusable);\r\n\r\n        // show the popup window\r\n        // which view you pass in doesn't matter, it is only used for the window tolken\r\n        popupWindow.showAtLocation(popupView, Gravity.CENTER, 0, 0);\r\n\r\n        popUpCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                popupWindow.dismiss();\r\n                if (!prefManager.isLoggedIn()){\r\n                    Intent intent =new Intent(LandingActivity.this, UserLogin.class);\r\n                    startActivity(intent);\r\n                    finish();\r\n                }else {\r\n                    Intent intent2 =new Intent(LandingActivity.this, OrderListActivity.class);\r\n                    startActivity(intent2);\r\n                    finish();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    void webViewOperation(WebView popupWebView, String url){\r\n        WebSettings setting= popupWebView.getSettings();\r\n        setting.setUserAgentString(USER_AGENT_FAKE);\r\n        popupWebView.setFocusable(true);\r\n        setting.setJavaScriptEnabled(true);\r\n        setting.setJavaScriptCanOpenWindowsAutomatically(true);\r\n        popupWebView.loadUrl(url);\r\n        CookieManager.getInstance().setAcceptCookie(true);\r\n        popupWebView.setWebViewClient(new WebViewClient(){\r\n            @Override\r\n            public void onReceivedHttpAuthRequest(WebView view, HttpAuthHandler handler, String host, String realm) {\r\n                handler.proceed(user_name,user_pass);\r\n            }\r\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n                if (url.endsWith(\".mp4\")) {\r\n                    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\r\n\r\n                    startActivity(intent);\r\n                    return true;\r\n                } else {\r\n                    return super.shouldOverrideUrlLoading(view, url);\r\n                }\r\n            }\r\n            public void onPageFinished(WebView view, String url) {\r\n                if (progressBar.isShowing()) {\r\n                    progressBar.dismiss(); }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//\r\n//    private void showMessageDialog(String title, final String url, String msg, String done, final String msgType){\r\n//        final AlertDialog alertDialog;\r\n//        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n//        LayoutInflater inflater = LayoutInflater.from(this);\r\n//        ConstraintLayout customRoot = (ConstraintLayout) inflater.inflate(R.layout.load_message_view,null);\r\n//\r\n//        CardView skip_key=customRoot.findViewById(R.id.skip_key);\r\n//        CardView done_key=customRoot.findViewById(R.id.done_key);\r\n//        TextView btnDone=customRoot.findViewById(R.id.btnDone);\r\n//        btnDone.setText(done);\r\n//\r\n//        TextView msgView=customRoot.findViewById(R.id.messageText);\r\n//        msgView.setText(msg);\r\n//        builder.setView(customRoot);\r\n//        builder.setTitle(title);\r\n//        builder.setCancelable(true);\r\n//        alertDialog= builder.create();\r\n//        alertDialog.show();\r\n//        skip_key.setOnClickListener(new View.OnClickListener() {\r\n//            @Override\r\n//            public void onClick(View v) {\r\n//                if (msgType.equals(\"1\")){\r\n//                    if (!prefManager.isLoggedIn()){\r\n//                        Intent intent =new Intent(LandingActivity.this, UserLogin.class);\r\n//                        startActivity(intent);\r\n//                        finish();\r\n//                    }else {\r\n//                        Intent intent2 =new Intent(LandingActivity.this, OrderListActivity.class);\r\n//                        startActivity(intent2);\r\n//                        finish();\r\n//                    }\r\n//                }else if (msgType.equals(\"2\")){\r\n//                    checkApplication();\r\n//                }\r\n//                alertDialog.dismiss();\r\n//            }\r\n//        });\r\n//        done_key.setOnClickListener(new View.OnClickListener() {\r\n//            @Override\r\n//            public void onClick(View v) {\r\n//                if (msgType.equals(\"1\")){\r\n//                    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\r\n//                    startActivity(browserIntent);\r\n//                }else if (msgType.equals(\"2\")){\r\n//                    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\r\n//                    startActivity(browserIntent);\r\n//                }\r\n//                alertDialog.dismiss();\r\n//            }\r\n//        });\r\n//    }
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/orderFlex/paymentCollection/Activityes/LandingPage/LandingActivity.java	(revision b2a4ddea84f672c206943591a67d39681c3cb560)
+++ app/src/main/java/orderFlex/paymentCollection/Activityes/LandingPage/LandingActivity.java	(date 1613471577506)
@@ -53,8 +53,7 @@
     public static final String USER_AGENT_FAKE = "Mozilla/5.0 (Linux; Android 4.1.1; Galaxy Nexus Build/JRO03C) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19";
     private String user_name="", user_pass="";
     public ProgressDialog progressBar;
-
-
+    
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
